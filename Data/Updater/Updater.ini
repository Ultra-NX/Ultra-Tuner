;color=#6600FF
;show_widget=true



[@Updater]

[Header]
;mode=table
;header_indent=true
;background=false
;gap=17
ini_file '/switch/.packages/Ultra Tuner/config.ini'
'Current Tuner: {ini_file(Updater,current)}'= 'Latest: {ini_file(Updater,latest)}'






[Manual Update]

[Ultrahand - Update]

try:
download https://github.com/ppkantorski/Ultrahand-Overlay/releases/latest/download/ovlmenu.ovl /switch/.overlays/ovlmenu.ovl
download https://github.com/ppkantorski/Ultrahand-Overlay/releases/latest/download/lang.zip /config/ultrahand/downloads/UltraNX/downloads.zip
unzip /config/ultrahand/downloads/UltraNX/downloads.zip /config/ultrahand/lang/

del /config/ultrahand/downloads/UltraNX/





[Ultra Tuner - Update]

try:
ini_file '/switch/.packages/Ultra Tuner/package.ini'
json '[{"null":"main", "main":"main", "test":"test"}]'
download 'https://github.com/Ultra-NX/Ultra-Tuner/archive/refs/heads/{json(0,{ini_file(Header,;tuner)})}.zip' /config/ultrahand/downloads/UltraNX/downloads.zip
unzip /config/ultrahand/downloads/UltraNX/downloads.zip /config/ultrahand/downloads/UltraNX/
mv '/switch/.packages/Ultra Tuner/config.ini' '/config/ultrahand/downloads/UltraNX/Ultra-Tuner-{json(0,{ini_file(Header,;tuner)})}/config.ini'
mv '/switch/.packages/Ultra Tuner/Data/Presets/config.ini' '/config/ultrahand/downloads/UltraNX/Ultra-Tuner-{json(0,{ini_file(Header,;tuner)})}/Data/Presets/config.ini'
mv '/config/ultrahand/downloads/UltraNX/Ultra-Tuner-{json(0,{ini_file(Header,;tuner)})}/' '/config/ultrahand/downloads/UltraNX/Ultra Tuner/'
del '/switch/.packages/Ultra Tuner/'
mv '/config/ultrahand/downloads/UltraNX/Ultra Tuner/' '/switch/.packages/Ultra Tuner/'

mv ./boot_package.ini ./boot_package-bak.ini
cp '/switch/.packages/Ultra Tuner/boot_package.ini' ./boot_package.ini
exec boot
exec update
mv ./boot_package-bak.ini ./boot_package.ini

del /config/ultrahand/downloads/UltraNX/

refresh







[@Options]

[Test Tuner]
;mode=toggle
ini_file '/switch/.packages/Ultra Tuner/package.ini'
json '[{"null":"main", "main":"main", "test":"test"}]'

on:
    set-ini-val '/switch/.packages/Ultra Tuner/package.ini' Header ';tuner' test

    download 'https://raw.githubusercontent.com/Ultra-NX/Ultra-Tuner/{ini_file(Header,;tuner)}/package.ini' '/switch/.packages/Ultra Tuner/update.ini'
    ini_file '/switch/.packages/Ultra Tuner/update.ini'
    set-ini-val '/switch/.packages/Ultra Tuner/config.ini' Updater latest '{ini_file(Header,;version)}'

off:
    set-ini-val '/switch/.packages/Ultra Tuner/package.ini' Header ';tuner' main

    download 'https://raw.githubusercontent.com/Ultra-NX/Ultra-Tuner/{ini_file(Header,;tuner)}/package.ini' '/switch/.packages/Ultra Tuner/update.ini'
    ini_file '/switch/.packages/Ultra Tuner/update.ini'
    set-ini-val '/switch/.packages/Ultra Tuner/config.ini' Updater latest '{ini_file(Header,;version)}'
